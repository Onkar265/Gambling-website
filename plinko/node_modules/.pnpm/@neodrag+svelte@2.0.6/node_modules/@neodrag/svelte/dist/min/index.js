var e={dragStart:!0},t=(e,t,n)=>Math.min(Math.max(e,t),n),n=e=>"string"==typeof e,r=([e,t],n,r)=>{const o=(e,t)=>0===t?0:Math.ceil(e/t)*t;return[o(n,e),o(r,t)]};var o=(e,t)=>e.some((e=>t.some((t=>e.contains(t)))));function i(e,t){if(void 0===e)return;if(s(e))return e.getBoundingClientRect();if("object"==typeof e){const{top:t=0,left:n=0,right:r=0,bottom:o=0}=e;return{top:t,right:window.innerWidth-r,bottom:window.innerHeight-o,left:n}}if("parent"===e)return t.parentNode.getBoundingClientRect();const n=document.querySelector(e);if(null===n)throw new Error("The selector provided for bound doesn't exists in the document.");return n.getBoundingClientRect()}var a=(e,t,n)=>e.style.setProperty(t,n),s=e=>e instanceof HTMLElement,d=(d,l={})=>{let c,u,{bounds:f,axis:g="both",gpuAcceleration:h=!0,legacyTranslate:p=!0,transform:m,applyUserSelectHack:w=!0,disabled:y=!1,ignoreMultitouch:b=!1,recomputeBounds:v=e,grid:x,position:E,cancel:S,handle:A,defaultClass:C="neodrag",defaultClassDragging:N="neodrag-dragging",defaultClassDragged:D="neodrag-dragged",defaultPosition:M={x:0,y:0},onDragStart:B,onDrag:$,onDragEnd:R}=l,H=!1,L=0,T=0,X=0,Y=0,q=0,P=0,{x:k,y:z}=E?{x:E?.x??0,y:E?.y??0}:M;V(k,z);let I,U,W,j,F,G="",J=!!E;v={...e,...v};let K=new Set;const O=document.body.style,Q=d.classList;function V(e=L,t=T){if(!m){if(p){let n=`${+e}px, ${+t}px`;return a(d,"transform",h?`translate3d(${n}, 0)`:`translate(${n})`)}return a(d,"translate",`${+e}px ${+t}px ${h?"1px":""}`)}const r=m({offsetX:e,offsetY:t,rootNode:d});n(r)&&a(d,"transform",r)}const Z=(e,t)=>{const n={offsetX:L,offsetY:T,rootNode:d,currentNode:F};d.dispatchEvent(new CustomEvent(e,{detail:n})),t?.(n)};const _=addEventListener;_("pointerdown",te,!1),_("pointerup",ne,!1),_("pointermove",re,!1),a(d,"touch-action","none");const ee=()=>{let e=d.offsetWidth/U.width;return isNaN(e)&&(e=1),e};function te(e){if(y)return;if(2===e.button)return;if(K.add(e.pointerId),b&&K.size>1)return e.preventDefault();if(v.dragStart&&(I=i(f,d)),n(A)&&n(S)&&A===S)throw new Error("`handle` selector can't be same as `cancel` selector");if(Q.add(C),W=function(e,t){if(!e)return[t];if(s(e))return[e];if(Array.isArray(e))return e;const n=t.querySelectorAll(e);if(null===n)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(n.values())}(A,d),j=function(e,t){if(!e)return[];if(s(e))return[e];if(Array.isArray(e))return e;const n=t.querySelectorAll(e);if(null===n)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(n.values())}(S,d),c=/(both|x)/.test(g),u=/(both|y)/.test(g),o(j,W))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const t=e.composedPath()[0];if(!W.some((e=>e.contains(t)||e.shadowRoot?.contains(t)))||o(j,[t]))return;F=1===W.length?d:W.find((e=>e.contains(t))),H=!0,U=d.getBoundingClientRect(),w&&(G=O.userSelect,O.userSelect="none"),Z("neodrag:start",B);const{clientX:r,clientY:a}=e,l=ee();c&&(X=r-k/l),u&&(Y=a-z/l),I&&(q=r-U.left,P=a-U.top)}function ne(e){K.delete(e.pointerId),H&&(v.dragEnd&&(I=i(f,d)),Q.remove(N),Q.add(D),w&&(O.userSelect=G),Z("neodrag:end",R),c&&(X=L),u&&(Y=T),H=!1)}function re(e){if(!H||b&&K.size>1)return;v.drag&&(I=i(f,d)),Q.add(N),e.preventDefault(),U=d.getBoundingClientRect();let n=e.clientX,o=e.clientY;const a=ee();if(I){const e={left:I.left+q,top:I.top+P,right:I.right+q-U.width,bottom:I.bottom+P-U.height};n=t(n,e.left,e.right),o=t(o,e.top,e.bottom)}if(Array.isArray(x)){let[e,t]=x;if(isNaN(+e)||e<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+t)||t<0)throw new Error("2nd argument of `grid` must be a valid positive number");let i=n-X,s=o-Y;[i,s]=r([e/a,t/a],i,s),n=X+i,o=Y+s}c&&(L=Math.round((n-X)*a)),u&&(T=Math.round((o-Y)*a)),k=L,z=T,Z("neodrag",$),V()}return{destroy:()=>{const e=removeEventListener;e("pointerdown",te,!1),e("pointerup",ne,!1),e("pointermove",re,!1)},update:t=>{g=t.axis||"both",y=t.disabled??!1,b=t.ignoreMultitouch??!1,A=t.handle,f=t.bounds,v=t.recomputeBounds??e,S=t.cancel,w=t.applyUserSelectHack??!0,x=t.grid,h=t.gpuAcceleration??!0,p=t.legacyTranslate??!0,m=t.transform;const n=Q.contains(D);Q.remove(C,D),C=t.defaultClass??"neodrag",N=t.defaultClassDragging??"neodrag-dragging",D=t.defaultClassDragged??"neodrag-dragged",Q.add(C),n&&Q.add(D),J&&(k=L=t.position?.x??L,z=T=t.position?.y??T,V())}}};
//!THIS IS HACK, WE WANNA IMPORT THE TYPE WHEN THE ISSUE IS FIXED LATER
export{d as draggable};